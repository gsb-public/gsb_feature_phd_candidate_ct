<?php
/**
 * @file
 * Code for the GSB Feature PhD Candidate CT feature.
 */

include_once 'gsb_feature_phd_candidate_ct.features.inc';

/**
 * Implements hook_form_alter().
 */
function gsb_feature_phd_candidate_ct_form_alter(&$form, &$form_state, $form_id) {

  if ($form_id == 'phd_candidate_node_form') {

    unset($form['field_working_papers']['und'][0]['field_title']);

    unset($form['field_working_papers']['und'][0]['field_link_single']['und'][0]['#title']);
		unset($form['field_work_in_progress']['und'][0]['field_link_single']['und'][0]['#title']);
		unset($form['field_publications']['und'][0]['field_link_single']['und'][0]['#title']);
		unset($form['field_link_single']['und'][0]['#title']);

    $language = $form['language']['#value'];

    $form['field_academic_institution'][$language][0]['value']['#states'] = array(
      'visible' => array(
        ':input[name="field_job_display[' . $language . ']"]' => array(
          array('value' => 'placement_page'),
        ),
      ),
    );  

    $form['field_year']['#states'] = array(
	    'visible' => array(
	      ':input[name="field_job_display[' . $language . ']"]' => array(
	        array('value' => 'placement_page'),
	      ),
      ),
		);    

  }  

}